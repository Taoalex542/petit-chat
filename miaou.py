import base64
from qgis.PyQt.QtWidgets import QAction
from qgis.PyQt.QtGui import (QPixmap, QIcon)
from qgis.utils import iface
from qgis.core import *

def output_demo():
    #put whatevr code you want for it to execute
    print('miaou')
    iface.messageBar().pushMessage("petit chat", "miaou", level=Qgis.Info)

#transform image to base 64, adds button with specified image, if image isn't found it will just show text
#image does not need to be present after getting the base 64
base64_data = "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"
pm1 = QPixmap()
pm1.loadFromData(base64.b64decode(base64_data))
demo_action = QAction(
    QIcon(pm1),
    'petit chat',
)
demo_action.triggered.connect(output_demo)
toolbar1 = iface.addToolBar('petit chat')
toolbar1.setObjectName('petit chat')
toolbar1.addAction(demo_action)
